package workshop_2;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

public class Registry {


	public ArrayList<Member> listOfMembers;
	private static int iD = 5;
	private static int NextValidID = 6;

	public Registry(){
		listOfMembers = loadRegistry();
	}
	public static int getNextValidID() {
		// TODO Auto-generated method stub
		return NextValidID;
	}
	public int getID() {
		return iD;
	}
	public static boolean containsID(int test) {
		if(iD == test){
			return true;
		}
		else{
			return false;
		}

	}
	public void deleteMember(){
	}
	public static int numberOfBoats() {
		// TODO Auto-generated method stub
		return 0;
	}
	public static ArrayList<Member> loadRegistry(){
		ArrayList<Member> arr = new ArrayList<Member>();
		String temp[];
		String member = "member";
		String boat = "boat";
		for(int i = 0; i <20; i++){		
			temp = test(member, i);
			if(temp != null){
				Member tempMember =  new Member( Integer.parseInt(temp[0]),temp[1], temp[2]);
				for (int j = 0; j < 5; j++) {
					temp = test("boat_"+(j+1),i);
					if(temp != null){
						tempMember.listOfBoats[j] = new Boat(temp[1],temp[2]);
					}
				}
				arr.add( new Member( Integer.parseInt(temp[0]),temp[1], temp[2]));
				System.out.println(arr.get(0).getID());
			}
			


			
		}
		for (int i = 0; i < 4; i++) {
			System.out.println(arr.get(i).getID());
		}
		
		return arr;
	}

	public static String[] test(String file, int i){
		String temp[] = new String[3];

		try {
			String line = null;
			FileReader fileReader = new FileReader(i+"/"+file+".txt");
			BufferedReader bufferedReader = new BufferedReader(fileReader);
			int innerCounter = 0;
			while((line = bufferedReader.readLine()) != null) {
				innerCounter++;
				if(innerCounter == 1){
					temp[0] = line;
				}
				else if (innerCounter == 2){
					temp[1] = line;
				}
				else if (innerCounter == 3){
					temp[2] = line;
				}  	

			} 
			bufferedReader.close();    
			return temp;
		}
		catch(FileNotFoundException ex) {            
		}
		catch(IOException ex) {
			System.out.println(
					"Error reading file");                  
		}
		return null;

	}
}
